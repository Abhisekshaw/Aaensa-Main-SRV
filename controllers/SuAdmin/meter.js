// const responseData = {
//     "success": true,
//     "message": "Data fetched successfully",
//     "response": [
//         {
//             "EnterpriseName": "Testing",
//             "State": [
//                 {
//                     "stateName": "Chandigarh",
//                     "state_ID": "658024a27c64bcd8e249a073",
//                     "location": [
//                         {
//                             "locationName": "Dhakoli",
//                             "location_ID": "65fbe12fc939e0589f097e74",
//                             "gateway": [
//                                 {
//                                     "GatewayName": "864292049541566",
//                                     "Gateway_ID": "65fbe148c939e0589f097e82",
//                                     "GatewayLogs": [
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.65,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.76,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba0d199cf2c64ea7246e",
//                                             "GatewayID": "65fbe148c939e0589f097e82",
//                                             "TimeStamp": "1711585804",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:05.744Z",
//                                             "updatedAt": "2024-03-28T00:30:05.744Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.69,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.79,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba16199cf2c64ea72491",
//                                             "GatewayID": "65fbe148c939e0589f097e82",
//                                             "TimeStamp": "1711585812",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:14.123Z",
//                                             "updatedAt": "2024-03-28T00:30:14.123Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.81,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.94,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba1e199cf2c64ea724ae",
//                                             "GatewayID": "65fbe148c939e0589f097e82",
//                                             "TimeStamp": "1711585820",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:22.433Z",
//                                             "updatedAt": "2024-03-28T00:30:22.433Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.69,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.81,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba26199cf2c64ea724cb",
//                                             "GatewayID": "65fbe148c939e0589f097e82",
//                                             "TimeStamp": "1711585829",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:30.687Z",
//                                             "updatedAt": "2024-03-28T00:30:30.687Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.71,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.84,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba2f199cf2c64ea724e8",
//                                             "GatewayID": "65fbe148c939e0589f097e82",
//                                             "TimeStamp": "1711585837",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:39.123Z",
//                                             "updatedAt": "2024-03-28T00:30:39.123Z",
//                                             "__v": 0
//                                         }
//                                     ]
//                                 },
//                                 {
//                                     "GatewayName": "000000001111111222",
//                                     "Gateway_ID": "9389f65fb8c09e05e1497e80",
//                                     "GatewayLogs": [
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.65,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.76,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba0d199cf2c64ea7246e",
//                                             "GatewayID": "65fb8c9389f09e05e1497e82",
//                                             "TimeStamp": "1711585904",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:05.744Z",
//                                             "updatedAt": "2024-03-28T00:30:05.744Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.69,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.79,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba16199cf2c64ea72491",
//                                             "GatewayID": "65fb8c9389f09e05e1497e82",
//                                             "TimeStamp": "1711586812",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:14.123Z",
//                                             "updatedAt": "2024-03-28T00:30:14.123Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.81,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.94,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba1e199cf2c64ea724ae",
//                                             "GatewayID": "65fb8c9389f09e05e1497e82",
//                                             "TimeStamp": "1711587820",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:22.433Z",
//                                             "updatedAt": "2024-03-28T00:30:22.433Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.69,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.81,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba26199cf2c64ea724cb",
//                                             "GatewayID": "65fb8c9389f09e05e1497e82",
//                                             "TimeStamp": "1711588829",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:30.687Z",
//                                             "updatedAt": "2024-03-28T00:30:30.687Z",
//                                             "__v": 0
//                                         },
//                                         {
//                                             "Phases": {
//                                                 "Ph1": {
//                                                     "Voltage": 243,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph2": {
//                                                     "Voltage": 243.71,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 },
//                                                 "Ph3": {
//                                                     "Voltage": 243.84,
//                                                     "Current": 0,
//                                                     "ActivePower": 0,
//                                                     "PowerFactor": 0,
//                                                     "ApparentPower": 0
//                                                 }
//                                             },
//                                             "_id": "6604ba2f199cf2c64ea724e8",
//                                             "GatewayID": "65fb8c9389f09e05e1497e82",
//                                             "TimeStamp": "1711589837",
//                                             "KVAH": 137,
//                                             "KWH": 130,
//                                             "PF": 0,
//                                             "isDelete": false,
//                                             "createdAt": "2024-03-28T00:30:39.123Z",
//                                             "updatedAt": "2024-03-28T00:30:39.123Z",
//                                             "__v": 0
//                                         }
//                                     ]
//                                 }
//                             ]
//                         }
//                     ]
//                 }
//             ]
//         }
//     ],
//     "pagination": {
//         "page": 1,
//         "pageSize": 100,
//         "totalResults": 4990
//     }
// };

const responseData = {
    "success": true,
    "message": "Data fetched successfully",
    "response": [
        {
            "EnterpriseName": "Testing",
            "State": [
                {
                    "stateName": "Chandigarh",
                    "state_ID": "658024a27c64bcd8e249a073",
                    "location": [
                        {
                            "locationName": "Dhakoli",
                            "location_ID": "65fbe12fc939e0589f097e74",
                            "gateway": [
                                {
                                    "GatewayName": "864292049541566",
                                    "Gateway_ID": "65fbe148c939e0589f097e82",
                                    "GatewayLogs": [
                                        {
                                            "Phases": {
                                                "Ph1": {
                                                    "Voltage": 243
                                                },
                                                "Ph2": {
                                                    "Voltage": 243.69
                                                },
                                                "Ph3": {
                                                    "Voltage": 243.81
                                                }
                                            },
                                            "GatewayID": "65fbe148c939e0589f097e82",
                                            "TimeStamp": "1711585820",
                                            "KVAH": 137,
                                            "KWH": 130
                                        },
                                        {
                                            "Phases": {
                                                "Ph1": {
                                                    "Voltage": 243
                                                },
                                                "Ph2": {
                                                    "Voltage": 243.86
                                                },
                                                "Ph3": {
                                                    "Voltage": 243.98
                                                }
                                            },
                                            "_id": "6604ba40199cf2c64ea72520",
                                            "GatewayID": "65fbe148c939e0589f097e82",
                                            "TimeStamp": "1711585830",
                                            "KVAH": 137,
                                            "KWH": 130
                                        },
                                        {
                                            "Phases": {
                                                "Ph1": {
                                                    "Voltage": 244
                                                },
                                                "Ph2": {
                                                    "Voltage": 244.06
                                                },
                                                "Ph3": {
                                                    "Voltage": 244.15
                                                }
                                            },
                                            "_id": "6604ba64199cf2c64ea72597",
                                            "GatewayID": "65fbe148c939e0589f097e82",
                                            "TimeStamp": "1711585840",
                                            "KVAH": 137,
                                            "KWH": 130
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    "pagination": {
        "page": 1,
        "pageSize": 100,
        "totalResults": 4990
    }
};

// Extract GatewayLogs from the response object
const gatewayLogs = responseData.response[0].State[0].location[0].gateway[0].GatewayLogs;
// Extract timestamps and corresponding objects from GatewayLogs
const timestamps = gatewayLogs.map(entry => ({ timestamp: Number(entry.TimeStamp), data: entry }));
// console.log({responseData});
const intervalSeconds = 10;

function findNextAvailableTimestamp(currentTimestamp) {
    for (let i = 0; i < timestamps.length; i++) {
        if (timestamps[i].timestamp > currentTimestamp) {
            return timestamps[i];
        }
    }
    return null; // If no next available timestamp found
}

function generateTimestamps(timestamps, intervalSeconds) {
    const generatedTimestamps = [];
    let currentTimestamp = timestamps[0].timestamp;

    for (let i = 0; i < timestamps.length - 1; i++) {
        const nextTimestamp = currentTimestamp + intervalSeconds;

        if (timestamps.some(entry => entry.timestamp === nextTimestamp)) {
            const nextObject = timestamps.find(entry => entry.timestamp === nextTimestamp);
            generatedTimestamps.push(nextObject);
            currentTimestamp = nextTimestamp;
        } else {
            const nextAvailableTimestamp = findNextAvailableTimestamp(nextTimestamp);
            if (nextAvailableTimestamp !== null) {
                generatedTimestamps.push(nextAvailableTimestamp);
                currentTimestamp = nextAvailableTimestamp.timestamp;
            } else {
                break; // No further timestamps available
            }
        }
    }

    return generatedTimestamps;
}

const result = generateTimestamps(timestamps, intervalSeconds);
// Output the result
console.log("Report should display data at the following timestamps:");
const displayObjects = [];
result.forEach(entry => {
    displayObjects.push(entry.data);
    // console.log(entry.timestamp, new Date(entry.timestamp * 1000).toLocaleString(), entry.data);
});
responseData.response[0].State[0].location[0].gateway[0].GatewayLogs = displayObjects;
const jsonData = responseData;
console.log(responseData);
// -------------------------------------------------------------------------------------------------------------
